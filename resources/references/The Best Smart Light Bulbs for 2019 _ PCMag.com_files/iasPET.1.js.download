window.__iasPET=window.__iasPET||{};
window.__iasPET.start=window.__iasPET.start||function(g,w){var h;try{var q=function(a){var e,d,f,l,c={},b=function(a){return a&&a.replace(/[^\w-_.>\/]/g,"")};e=b(function(a){return a&&a.replace(/\//g,"")}(a.adSlotId));d=a.size&&a.size instanceof Array&&a.size.join(".");f=b(a.adUnitPath);l=function(c){var d="display";"undefined"!==typeof a.type&&null!=c&&"video"==b(c)&&(d="video");return d}(a.type);c.id=e;c=k.extend(c,function(a){var c={};k.isArray(a)&&(a.every(k.isArray)?(a=a.map(function(a){return a.join(".")}).join(","),
c.ss="["+a+"]"):c.s=a.join("."));return c}(a.size));c.p=f;c.t=l;return{toString:function(){var a,b=[];for(a in c)b.push(a+":"+c[a]);return"slot="+("{"+b.join(",")+"}")},isValid:function(){return e&&d&&f}}},y=function(){var a={},e=function(c){return setTimeout(function(){a[c]||(h.diagPix(m.LONG_REQUEST,{message:"threshold:2000"}),h.warn("Long PET request that exceeds 2000ms."))},2E3)},d=function(c){var b=k.getQueryParamByName("iasprofileprobability")||10,d,e,f={};k.chance(b)&&setTimeout(function(){e=
(d=a[c])&&d-c;f.responsetime=e;f.probability=b;h.diagPix(m.PROFILE_RESPONSE,{message:k.buildQueryString(f,":")})},2E3)},f=function(a){return a.width+"."+a.height},l=function(){var a=[],b=g.__iasPET.pubId,d=f(s.getWindowSize(g)),e=f(s.getScreenSize(g)),l=g.__iasPET.sessionId;if(!n.isEmpty()&&b)return a.push("anId="+b),a.push(n),a.push("wr="+d),a.push("sr="+e),a.push("sessionId="+l),h.log("ad slots set: "+n),h.log("anid set: "+b),a.join("&");n.isEmpty()&&h.error("Expected valid ad slot configuration.");
b||h.error("Expecting valid IAS publisher id.");h.diagPix(m.MISSING_DATA)};return{send:function(c,b){var f,g,r=!1,m,p=k.getQueryParamByName("iasendpoint")||"//pixel.adsafeprotected.com/services/pub",t=l(),q=k.isFn(c);t&&(f=function(b){r=k.now();h.log("PET response "+b);a[g]=r;u.updateData(b);q&&c(b);clearTimeout(m)},g=k.now(),a[g]=!1,k.sendXHR(p,t,f,b),m=e(g),d(g),n.clear())}}},v=function(){var a,e,d,f,l=function(c){c&&(e=k.isFn(c.dataHandler)?c.dataHandler:e,a=c.timeout||a,n.setAdSlots(c))};return{setup:function(){d=
new y;f=f||g.__iasPET.queue;f.push=function(c){var b;try{if(k.isFn(c))b=c();else if(k.isObj(c))b=c;else throw Error("Items pushed into the queue must be a function or object");}catch(f){h.error("Error processing queued command: "+f.message)}l(b);d.send(e,a)}},executeCommands:function(){var c,b;if((f=f||g.__iasPET.queue)&&f.length){for(c=0;c<f.length;++c){try{k.isFn(f[c])?b=f[c]():k.isObj(f[c])&&(b=f[c])}catch(x){h.error("Error processing queued command: "+x.message)}l(b)}d.send(e,a)}}}}(),n=function(){var a=
[],e=function(d){(new q(d)).isValid()?a.push(new q(d)):h.error("Missing ad slot id, slot size and/or ad unit path.")};return{setAdSlots:function(a){(a=a.adSlots)&&(a instanceof Array?a.forEach(function(a){e(a)}):k.isObj(a)&&e(a))},clear:function(){a=[]},isEmpty:function(){return 0===a.length},toString:function(){return a.join("&")}}}(),u=function(){var a={},e={},d={},f=function(a,b){a&&k.isFn(a.setTargeting)&&k.forIn(b,function(b,e){h.log("setting targeting: {"+b+": "+e+"}");a.setTargeting(b,e)})},
l=function(){var a,b=g.googletag.pubads().getSlots();b?b.forEach(function(b){(a=k.isFn(b.getSlotElementId)&&b.getSlotElementId())&&f(b,e[a])}):h.error("GPT slots have to be defined before setting slot level keyword targeting")};return{updateData:function(c){var b=JSON.parse(c);c=b.brandSafety;var f=b.slots,l=b.custom;a.fr=b.fr;b=function(a,b){k.forIn(a,function(a,c){b[a]=c})};b(c,a);b(f,e);b(l,d)},setTargeting:function(){g.googletag?g.googletag.cmd.push(function(){f(g.googletag.pubads(),a);l();f(g.googletag.pubads(),
d)}):(h.error("googletag is not available. Cannot set keyword targeting for GPT."),h.diagPix(m.GPT_NA));k.isEmptyObj(a)&&h.warn("PET page level data (brand safety, fraud) is not available yet.");k.isEmptyObj(e)&&h.warn("PET slot level data (viewability) is not available yet.")}}}(),m={GPT_NA:"gpt",LONG_REQUEST:"longreq",MISSING_DATA:"m",XHR_NA:"na",PROFILE_RESPONSE:"profile",XHR_GENERAL:"x",XHR_ERROR:"xe",XHR_TIMEOUT:"xt"},s={getWindowSize:function(a){return{width:a.innerWidth||-1,height:a.innerHeight||
-1}},getScreenSize:function(a){return{width:a.screen&&a.screen.width||-1,height:a.screen&&a.screen.height||-1}}};g.__iasPET.queue=g.__iasPET.queue||[];g.__iasPET.VERSION="1.11.0";g.__iasPET.setTargetingForGPT=u.setTargeting;var p=function(){var a=function(a){top.postMessage(a,"*")};return g.postMessage?a:function(){}}();h=function(){var a={},e=function(a,c){var b="background-color: ",e=g.console&&"function"===typeof g.console.error,d=k.getQueryParamByName("iasdebug"),d=d&&"TRUE"===d.toUpperCase();
"log"===a?b+="lightgreen":"error"===a?b+="pink":"warn"===a&&(b+="lightyellow");e&&d&&(console.log("%cIAS_DEBUG: "+c,b),p("DEBUG_petErrorsLog: IAS_DEBUG: "+c))},d=e.bind(null,"log"),f=e.bind(null,"warn");return{diagPix:function(d,c){var b,e,f,h;if(!a[d])try{b=g.__iasPET.pubId||"",e=g.__iasPET.sessionId||"",a[d]=!0,f={code:"pet_"+d,anid:b,sessionId:e},c&&(f.err=encodeURIComponent(c.message)),h=k.buildQueryString(f,":"),(new Image).src="//pixel.adsafeprotected.com/jsdiagnostic?"+h,p("DEBUG_petErrorsReport: //pixel.adsafeprotected.com/jsdiagnostic?"+
h)}catch(m){}},error:e.bind(null,"error"),log:d,warn:f}}();var k={buildQueryString:function(a,e){var d="";a&&(d=Object.keys(a).reduce(function(d,h){d.push([h,a[h]].join(e));return d},[]).join("&"));return d},getQueryParamByName:function(a){var e,d=g.location.search&&g.location.search.toLowerCase();a=d&&d.indexOf(a);-1!==a&&(e=d.indexOf("=",a)+1,a=d.indexOf("&",e),a=-1===a?w:a,e=decodeURIComponent(d.slice(e,a)));return e},sendXHR:function(a,e,d,f){var g,c;try{if(g=new XMLHttpRequest)c=encodeURI(a+
"?"+e),g.open("GET",c),p("DEBUG_petDataRequest: "+c),g.onreadystatechange=function(){var a,b;if(4===g.readyState&&200===g.status)if(a=g.responseText,b=a.code)h.error("XMLHttpRequest failure code: "+a.code+", message: "+a.message);else if(d)try{d.call({},a)}catch(c){h.error("Error firing the XMLHttpRequest callback: "+c.message)}},f&&(g.timeout=f),g.ontimeout=function(){h.error("XMLHttpRequest timeout event is fired.");h.diagPix(m.XHR_TIMEOUT,{message:"timeout:"+f})},g.onerror=function(a){h.error("XMLHttpRequest error event is fired.");
h.diagPix(m.XHR_ERROR,a)},g.send()}catch(b){h.error("Error sending XMLHttpRequest: "+b.message),h.diagPix(m.XHR_GENERAL,b)}},forIn:function(a,e){for(var d in a)a.hasOwnProperty(d)&&e(d,a[d])},getUID:function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},extend:function(a,e){e&&Object.keys(e).forEach(function(d){a[d]=e[d]});return a},isArray:function(a){return a instanceof Array},isDef:function(a){return"undefined"!==
typeof a},isFn:function(a){return"function"===typeof a},isObj:function(a){return"object"===typeof a},isEmptyObj:function(a){return 0===Object.getOwnPropertyNames(a).length},now:function(){return(new Date).getTime()},chance:function(a){return 100*Math.random()<a}};"undefined"===typeof XMLHttpRequest?h.diagPix(m.XHR_NA):(g.__iasPET.sessionId=k.getUID(),v.setup(),v.executeCommands())}catch(z){h.error(z.message)}};window.__iasPET.start(window);
